<!DOCTYPE html>
<html>
    <head>
        <title>TEST API</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript">
            var serverUrl = "/";            
            
            function list() {
                var search = $("#txtSearch").val();
                
                $.ajax({
                    type: "GET",
                    url: serverUrl + "list",
                    data: {
                        search: search                        
                    }
                })
                .done(function(result) {
                    $("#results").text(JSON.stringify(result));
                });        
            }
            
            function authors() {
                $.ajax({
                    type: "GET",
                    url: serverUrl + "authors",
                })
                .done(function(result) {
                    $("#results").text(JSON.stringify(result));
                });        
            }

            function tags() {
                $.ajax({
                    type: "GET",
                    url: serverUrl + "tags",
                })
                .done(function(result) {
                    $("#results").text(JSON.stringify(result));
                });        
            }
                        
            function insert() {
                var text = $("#txtText").val(),
                	author = $("#txtAuthor").val(),
                	source = $("#txtSource").val(),
                	tag1 = $("#txtTag1").val(),
                	tag2 = $("#txtTag2").val(),
                	tag3 = $("#txtTag3").val(),
                	tags = [];
                	
                if (tag1) {
                	tags.push({
                		name: tag1
                	});
                } 
                if (tag2) {
                	tags.push({
                		name: tag2
                	});
                } 
                if (tag3) {
                	tags.push({
                		name: tag3
                	});
                } 
                
                $.ajax({
                    type: "POST",
                    url: serverUrl + "insert",
                    data: {
                        quote: {
							text: text,
							author: author,
							tags: tags,
							source: source
						}
                    }
                })
                .done(function(result) {
                    $("#results").text(JSON.stringify(result));
                });    
            }
            
        </script>
    </head>
    <body>        
        <h1>TEST API</h3>
        
        <h3>Inserimento</h3>
        
        <div>
        	<table>
        		<tr>
        			<td align="right">Testo: </td>
        			<td><input id="txtText" type="text" size="150"/></td>
        		</tr>
        		<tr>
        			<td align="right">Autore: </td>
        			<td><input id="txtAuthor" type="text" size="150"/></td>
        		</tr>
        		<tr>
        			<td align="right">Fonte: </td>
        			<td><input type="text" id="txtSource" size="150"/></td>
        		</tr>
        		<tr>
        			<td align="right">Tags: </td>
        			<td><input id="txtTag1" type="text"/> - <input id="txtTag2" type="text"/> - <input id="txtTag3" type="text"/></td>
        		</tr>
        	</table>
        </div>
        
        <div>            
            <button onclick="insert()">INSERT</button>            
        </div>

        <h3>Ricerca</h3>
        
        <div>
        	<table>
        		<tr>
        			<td align="right">Ricerca: </td>
        			<td><input id="txtSearch" type="text" size="150"/></td>
        		</tr>
        	</table>
        </div>
        
        <div>
            <button onclick="list()">LIST</button>            
        </div>
        
        <h3>Autori</h3>
        
        <div>
            <button onclick="authors()">LIST AUTHORS</button>            
        </div>
        
        <h3>Tags</h3>
        
        <div>
            <button onclick="tags()">LIST TAGS</button>            
        </div>
        
        <br/>
        
        <div>
        	<table>
        		<tr>
        			<td align="right">Risultato: </td>
        			<td><span id="results"/></td>
        		</tr>
        	</table>
        </div>                
    </body>
</html>
